
router {
    mode: interior
    id: router.to.cluster-01
}

sslProfile {
    name: broker-01-tls
    caCertFile: /etc/qpid-dispatch/server-ca.crt
    password: redhat
}

# Connection to the hub
connector {
    name: router.hub-01
    # substitute with actual hostname (or ip address) of the hub router
    host: amq-hub-router-01
    port: 5773
    role: inter-router
}

# Connection to the broker
connector {
    name: live-broker-01
    # substitute this with actual hostname (or ip address) of live broker 1
    host: amq-live-broker-01
    port: 61616
    role: route-container
    saslMechanisms: ANONYMOUS
    sslProfile: broker-01-tls
    verifyHostname: no
}

# Connection to the broker
connector {
    name: live-broker-02
    # substitute this with actual hostname (or ip address) of live broker 2
    host: amq-live-broker-02
    port: 61616
    role: route-container
    saslMechanisms: ANONYMOUS
}

# router will use the queue specified in prefix
address {
    prefix: exampleQueue
    # waypoint address ensures the queue is identified on the broker
    waypoint: yes
}

# connect router to broker using autoLink
# inbound link => message(s) will flow into the router (broker queue -> router)
autoLink {
    address: exampleQueue
    connection: live-broker-01
    direction: in
}

# outbound link => message(s) will flow out of the router (router -> broker queue)
autoLink {
    address: exampleQueue
    connection: live-broker-01
    direction: out
}

# connect router to broker using autoLink
# inbound link => message(s) will flow into the router (broker queue -> router)
autoLink {
    address: exampleQueue
    connection: live-broker-02
    direction: in
}

# outbound link => message(s) will flow out of the router (router -> broker queue)
autoLink {
    address: exampleQueue
    connection: live-broker-02
    direction: out
}
